<!-- The paginator for post list on HomePage. -->

<nav aria-label="Page Navigation">
  <ul class="pagination align-items-center mt-4 mb-0">
    <!-- left arrow -->
    {% assign prev_url = paginator.previous_page_path | relative_url %}
    <li class="page-item {% unless paginator.previous_page %}disabled{% endunless %}">
      <a class="page-link" href="{% if paginator.previous_page %}{{ prev_url }}{% else %}#{% endif %}" aria-label="previous-page">
        <i class="fas fa-angle-left"></i>
      </a>
    </li>
  
    <!-- page numbers -->
    {% assign left_ellipsis = false %}
    {% assign right_ellipsis = false %}
  
    <!-- 총 게시글 수 계산 -->
    {% assign total_posts = site.posts | where_exp: 'item', 'item.hidden != true' | size %}
    {% assign per_page = paginator.per_page | default: 10 %}
    {% assign total_pages = total_posts | divided_by: per_page %}
    {% assign total_pages = total_pages | ceil %}
  
    {% for i in (1..total_pages) %}
      {% assign show = false %}
  
      {% if paginator.page == 1 %}
        {% if i <= 3 or i == total_pages %}
          {% assign show = true %}
        {% endif %}
      {% elsif paginator.page == total_pages %}
        {% if i == 1 or i >= total_pages | minus: 2 %}
          {% assign show = true %}
        {% endif %}
      {% else %}
        {% if i == 1 or i == total_pages %}
          {% assign show = true %}
        {% elsif i >= paginator.page | minus: 1 and i <= paginator.page | plus: 1 %}
          {% assign show = true %}
        {% endif %}
      {% endif %}
  
      {% if show %}
      <!-- First page link modification -->
      {% if i == 1 %}
        <li class="page-item {% if paginator.page == 1 %}active{% endif %}">
          <a class="page-link" href="{{ '/' | relative_url }}">
            {{- i -}}
          </a>
        </li>
      {% else %}
        <li class="page-item {% if i == paginator.page %}active{% endif %}">
          <a class="page-link" href="{{ site.paginate_path | replace: ':num', i | relative_url }}">
            {{- i -}}
          </a>
        </li>
      {% endif %}
    {% else %}
      {% if i < paginator.page and left_ellipsis == false %}
        <li class="page-item disabled">
          <span class="page-link">...</span>
        </li>
        {% assign left_ellipsis = true %}
      {% elsif i > paginator.page and right_ellipsis == false %}
        <li class="page-item disabled">
          <span class="page-link">...</span>
        </li>
        {% assign right_ellipsis = true %}
      {% endif %}
    {% endif %}
  {% endfor %}

    <!-- mobile pagination -->
    <li class="page-index align-middle">
      <span>{{ paginator.page }}</span>
      <span class="text-muted">/ {{ total_pages }}</span>
    </li>
  
    <!-- right arrow -->
    {% assign next_url = paginator.next_page_path | relative_url %}
    <li class="page-item {% unless paginator.next_page %}disabled{% endunless %}">
      <a class="page-link" href="{% if paginator.next_page %}{{ next_url }}{% else %}#{% endif %}" aria-label="next-page">
        <i class="fas fa-angle-right"></i>
      </a>
    </li>
  </ul>
</nav>
<!-- .pagination -->
